<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dynamic QR Code Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
</head>
<body>
<h2>Dynamic QR Code Generator</h2>

<label>Enter QR ID:</label><br>
<input id="qrid" placeholder="example: promo1"><br><br>

<button onclick="makeQR()">Generate QR Code</button>

<div id="qr"></div>

<script>
function makeQR() {
    let id = document.getElementById("qrid").value.trim();
    if (!id) {
        alert("Please enter a QR ID!");
        return;
    }

    // This fixes your problem â€” it makes "Promo 1" safe in URLs
    let encodedID = encodeURIComponent(id);

    // This is what the QR will point to
    let finalURL = window.location.origin + "/redirect.html?id=" + encodedID;

    // Generate the QR image
    let qr = new QRious({
        value: finalURL,
        size: 250
    });

    // Show the QR code on the page
    document.getElementById("qr").innerHTML =
        `<h3>Your QR Code:</h3>
        <img src="${qr.toDataURL()}">
        <p>Points to:<br><code>${finalURL}</code></p>`;
}
</script>

</body>
</html>
